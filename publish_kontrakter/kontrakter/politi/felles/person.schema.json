{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://politiet.no/politi/fengsling/1.0/person",
  "description": "Trekt ut person for eksempler",

  "type": "object",
  "properties": {
    "person": {
      "$ref": "#/definitions/person"
    }
  },
  "required": ["person"],
  "additionalProperties": false,

  "definitions": {
    "person": {
      "type": "object",
      "description": "Person med alle nyttige data som fødselsnummer adresse osv., SSP nummer kun på siktede, tiltalte.",
      "properties": {
        "internId": {
          "type": "string",
          "description": "Intern id i melding, samme person i denne meldingen vil ha samme internId"
        },
        "navn": {
          "$ref": "#/definitions/personnavn"
        },
        "foedselsdato": {
          "type": "string",
          "format": "date"
        },
        "kjoenn": {
          "$ref": "#/definitions/kjoenn",
          "description": "Ukjent kjønn hvis denne ikke er med"
        },
        "statsborgerskap": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/land"
          }
        },
        "identitetsnummer": {
          "$ref": "#/definitions/personIdentifikator",
          "description": "Fødselsnummer, D-nummer eller SSP nummer som er den i bruk"
        },
        "tilleggsId": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/personIdentifikator"
          },
          "description": "Kan være SSP nummer hvis person har D-nummer, fremtidig historiske nummer?"
        },
        "adresseGradering": {
          "$ref": "#/definitions/adresseGradering",
          "description": "Settes hvis en person har en beskyttet adresse. Fortrolig så sendes ikke adresse, strengt fortrolig så sendes pboks. adresse f.eks. SOT6, klient adresse vet ikke ennå"
        },
        "personAdresse": {
          "$ref": "#/definitions/personAdresse"
        }
      },
      "required": [
        "internId",
        "navn",
        "foedselsdato",
        "statsborgerskap",
        "tilleggsId"
      ],
      "additionalProperties": false
    },
    "personEnkel": {
      "type": "object",
      "description": "Kun navn og fødselsdato (hvis den finnes)",
      "properties": {
        "internId": {
          "type": "string",
          "description": "Intern som peker på samme person i en spesifikk melding"
        },
        "navn": {
          "$ref": "#/definitions/personnavn"
        },
        "foedselsdato": {
          "type": "string",
          "format": "date"
        }
      },
      "required": ["internId", "navn"],
      "additionalProperties": false
    },
    "personAdresse": {
      "type": "object",
      "description": "Kan være graderte adresser",
      "properties": {
        "gradering": {
          "$ref": "#/definitions/adresseGradering",
          "description": "Vi sender ikke med graderte adresser bortsett fra kanskje KLIENT_ADRESSE (sjekker)"
        },
        "adresse": {
          "$ref": "#/definitions/adresse"
        }
      },
      "required": ["adresse"],
      "additionalProperties": false
    },
    "adresseGradering": {
      "type": "string",
      "description": "Samme enum som folkeregisteret, ugradert hvis den ikke er gradert",
      "enum": ["KLIENT_ADRESSE", "FORTROLIG", "STRENGT_FORTROLIG"]
    },
    "foedselsnummer": {
      "type": "string",
      "description": "Se skatteetaten. Kan være vanlig med 6 sifret fødselsdato og fiktivt (Tenor) fødselsnummer med +80 på måned slik at noen født 10.01.1990 begynner fiktivt nummer med 108190",
      "pattern": "[0-9]+",
      "minLength": 11,
      "maxLength": 11
    },
    "sspNummer": {
      "type": "string",
      "description": "Personidentifikator brukt av det sentrale straffe- og personopplysningsregisteret (SSP) hvis personen ikke har fødselsnummer. Validerer som et fødselsnummer med +20 på måned så noen født 10.01.1990 begynner med 102190",
      "pattern": "[0-9]+",
      "minLength": 11,
      "maxLength": 11
    },
    "dNummer": {
      "type": "string",
      "description": "Se skatteetaten. Dag på datodelen er +40. Født 10.01.1990, begynner med 31.01.90",
      "pattern": "[0-9]+",
      "minLength": 11,
      "maxLength": 11
    },
    "personIdentifikator": {
      "type": "object",
      "description": "Fødselsnummer, D-nummer eller SSP nummer",
      "properties": {
        "foedselsnummer": {
          "$ref": "#/definitions/foedselsnummer"
        },
        "sspNummer": {
          "$ref": "#/definitions/sspNummer"
        },
        "dNummer": {
          "$ref": "#/definitions/dNummer"
        }
      },
      "oneOf": [
        {
          "properties": {
            "foedselsnummer": {
              "$ref": "#/definitions/foedselsnummer"
            }
          },
          "required": ["foedselsnummer"],
          "additionalProperties": false
        },
        {
          "properties": {
            "sspNummer": {
              "$ref": "#/definitions/sspNummer"
            }
          },
          "required": ["sspNummer"],
          "additionalProperties": false
        },
        {
          "properties": {
            "dNummer": {
              "$ref": "#/definitions/dNummer"
            }
          },
          "required": ["dNummer"],
          "additionalProperties": false
        }
      ]
    },
    "adresse": {
      "type": "object",
      "properties": {
        "adresselinjer": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1,
            "maxLength": 500
          },
          "minItems": 1,
          "maxItems": 4
        },
        "postnummer": {
          "type": "string"
        },
        "poststed": {
          "type": "string"
        },
        "land": {
          "$ref": "#/definitions/land"
        }
      },
      "required": ["adresselinjer"],
      "additionalProperties": false
    },
    "land": {
      "type": "object",
      "description": "ISO-3166, Kosovo kommer",
      "properties": {
        "kode": {
          "type": "string",
          "pattern": "[A-Z]+",
          "minLength": 3,
          "maxLength": 3
        },
        "navn": {
          "type": "string"
        }
      },
      "required": ["kode"],
      "additionalProperties": false
    },
    "personnavn": {
      "type": "object",
      "properties": {
        "fornavn": {
          "type": "string"
        },
        "mellomnavn": {
          "type": "string"
        },
        "etternavn": {
          "type": "string"
        }
      },
      "required": ["etternavn"],
      "additionalProperties": false
    },
    "kjoenn": {
      "type": "string",
      "description": "Samme enum som folkeregisteret",
      "enum": ["KVINNE", "MANN"]
    }
  }
}
